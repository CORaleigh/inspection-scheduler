{"version":3,"file":"static/js/5396.cbd9f38c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js","../node_modules/@arcgis/core/views/layers/WMSLayerView.js","../node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import t from\"../../core/Accessor.js\";import{HandleOwnerMixin as o}from\"../../core/HandleOwner.js\";const a={visible:\"visibleSublayers\"};let l=class extends(o(t)){constructor(e){super(e),this.scale=0}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.sublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"wms-sublayer-update\",(e=>this.notifyChange(a[e.propertyName])))],\"layer\"))}get layers(){const{visibleSublayers:e}=this;return e.filter((e=>e.name)).map((e=>e.name)).join(\",\")}get version(){this.commitProperty(\"layers\");const e=this.layer;return e&&e.commitProperty(\"imageTransparency\"),(this._get(\"version\")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,s=null==e?void 0:e.sublayers,t=[],o=e=>{const{minScale:s,maxScale:a,sublayers:l,visible:i}=e;i&&(0===r||(0===s||r<=s)&&(0===a||r>=a))&&(l?l.forEach(o):t.unshift(e))};return null==s||s.forEach(o),t}toJSON(){const{layer:e,layers:r}=this,{imageFormat:s,imageTransparency:t,version:o}=e;return{format:s,request:\"GetMap\",service:\"WMS\",styles:\"\",transparent:t,version:o,layers:r}}};e([r()],l.prototype,\"layer\",null),e([r({readOnly:!0})],l.prototype,\"layers\",null),e([r({type:Number})],l.prototype,\"scale\",void 0),e([r({readOnly:!0})],l.prototype,\"version\",null),e([r({readOnly:!0})],l.prototype,\"visibleSublayers\",null),l=e([s(\"esri.layers.support.ExportWMSImageParameters\")],l);export{l as ExportWMSImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const i=i=>{let a=class extends i{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:r}=this;if(!e)return Promise.reject(new o(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:r}));const{popupEnabled:t}=r;if(!t)return Promise.reject(new o(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:t}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:i,height:a,x:m,y:n}=s;if(!(p&&i&&a))throw new o(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:i,height:a});const u=r.fetchFeatureInfo(p,i,a,m,n);return Promise.resolve(u?[u]:[])}};return e([r()],a.prototype,\"exportImageParameters\",void 0),e([r({readOnly:!0})],a.prototype,\"exportImageVersion\",null),e([r()],a.prototype,\"layer\",void 0),e([r(s)],a.prototype,\"timeExtent\",void 0),a=e([t(\"esri.layers.mixins.WMSLayerView\")],a),a};export default i;export{i as WMSLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{isAbortError as a}from\"../../../core/promiseUtils.js\";import o from\"../../../geometry/Extent.js\";import{RefreshableLayerView as n}from\"../../layers/RefreshableLayerView.js\";import p from\"../../layers/LayerView.js\";import{WMSLayerView as m}from\"../../layers/WMSLayerView.js\";import{BitmapContainer as h}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import d from\"./support/ExportStrategy.js\";const l=t.getLogger(\"esri.views.2d.layers.WMSLayerView2D\");let u=class extends(m(n(c(p)))){initialize(){const{layer:e,view:t}=this;e.supportsSpatialReference(t.spatialReference)||this.addResolvingPromise(Promise.reject(new s(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\",{layer:e})))}hitTest(){return null}update(e){this.strategy.update(e).catch((e=>{a(e)||l.error(e)}))}attach(){const{layer:e}=this,{imageMaxHeight:t,imageMaxWidth:r}=e;this._bitmapContainer=new h,this.container.addChild(this._bitmapContainer),this.strategy=new d({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.handles.add(this.watch(\"exportImageVersion\",(()=>this.requestUpdate())),\"exportImageVersion\")}detach(){this.handles.remove(\"exportImageVersion\"),this.strategy.destroy(),this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,r=this._bitmapContainer,{x:i,y:s}=e,{spatialReference:a}=t;let n=null,p=0,m=0;if(r.children.some((e=>{const{width:t,height:r,resolution:h,x:c,y:d}=e,l=c+h*t,u=d-h*r;return i>=c&&i<=l&&s<=d&&s>=u&&(n=new o({xmin:c,ymin:u,xmax:l,ymax:d,spatialReference:a}),p=t,m=r,!0)})),!n)return null;const h=n.width/p,c=Math.round((i-n.xmin)/h),d=Math.round((n.ymax-s)/h);return{extent:n,width:p,height:m,x:c,y:d}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.timeExtent,timestamp:this.refreshTimestamp,...i})}};e([r()],u.prototype,\"strategy\",void 0),e([r()],u.prototype,\"updating\",void 0),u=e([i(\"esri.views.2d.layers.WMSLayerView2D\")],u);var y=u;export default y;\n"],"names":["a","visible","l","o","t","constructor","e","super","this","scale","layer","_get","_set","handles","remove","add","sublayers","on","notifyChange","propertyName","layers","visibleSublayers","filter","name","map","join","version","commitProperty","r","s","minScale","maxScale","i","forEach","unshift","toJSON","imageFormat","imageTransparency","format","request","service","styles","transparent","prototype","readOnly","type","Number","initialize","exportImageParameters","p","destroy","exportImageVersion","fetchPopupFeatures","Promise","reject","popupEnabled","createFetchPopupFeaturesQuery","resolve","extent","width","height","x","m","y","n","u","fetchFeatureInfo","getLogger","c","view","supportsSpatialReference","spatialReference","addResolvingPromise","hitTest","update","strategy","catch","error","attach","imageMaxHeight","imageMaxWidth","_bitmapContainer","h","container","addChild","d","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","watch","detach","removeChild","removeAllChildren","moveStart","viewChange","moveEnd","children","some","resolution","xmin","ymin","xmax","ymax","Math","round","doRefresh","isUpdating","updating","updateRequested","timeExtent","timestamp","refreshTimestamp"],"sourceRoot":""}