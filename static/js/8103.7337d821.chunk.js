"use strict";(globalThis.webpackChunkinspections_app=globalThis.webpackChunkinspections_app||[]).push([[8103],{8103:(e,a,t)=>{t.d(a,{previewSymbol2D:()=>z});var l=t(10064),n=t(51995),s=t(17842),o=t(79563),i=t(37817),c=t(1682);const u="picture-fill",r="picture-marker",m="simple-fill",p="simple-line",h="simple-marker",d="text",f="Aa",v=22,y=120,w=80,b=40,g=document.createElement("canvas");function M(e,a){const t=g.getContext("2d"),l=[];return a&&(a.weight&&l.push(a.weight),a.size&&l.push(a.size+"px"),a.family&&l.push(a.family)),t.font=l.join(" "),t.measureText(e).width}const k=7.2/2.54,x=72/2.54;function L(e){if(0===e.length)return 0;if(e.length>2){const a=(0,s.Wz)(1),t=parseFloat(e);switch(e.slice(-2)){case"px":return t;case"pt":return t*a;case"in":return 72*t*a;case"pc":return 12*t*a;case"mm":return t*k*a;case"cm":return t*x*a}}return parseFloat(e)}function z(e,a){var t,g;const k=null!=(null==a?void 0:a.size)?(0,s.F2)(a.size):null,x=null!=(null==a?void 0:a.maxSize)?(0,s.F2)(a.maxSize):null,z=null!=(null==a?void 0:a.opacity)?a.opacity:null,F=null!=(null==a?void 0:a.rotation)?a.rotation:"angle"in e?e.angle:null,C=(0,o._M)(e);let Z=(0,o.mx)(e);if(C&&!Z){const e="type"in C?null:new n.Z(C);"#ffffff"===(e?e.toHex():null)&&(Z={color:"#bdc3c7",width:.75})}const S={shape:null,fill:null,stroke:Z,offset:[0,0]};null!=(t=Z)&&t.width&&(Z.width=Math.min(Z.width,w));const j=(null==(g=Z)?void 0:g.width)||0;let P=null!=k&&(null==(null==a?void 0:a.scale)||(null==a?void 0:a.scale)),T=0,q=0,E=!1;switch(e.type){case h:{const a=e.style,t=Math.min(null!=k?k:(0,s.F2)(e.size),x||y);switch(T=t,q=t,a){case"circle":S.shape={type:"circle",cx:0,cy:0,r:.5*t},P||(T+=j,q+=j);break;case"cross":S.shape={type:"path",path:[{command:"M",values:[0,.5*q]},{command:"L",values:[T,.5*q]},{command:"M",values:[.5*T,0]},{command:"L",values:[.5*T,q]}]};break;case"diamond":S.shape={type:"path",path:[{command:"M",values:[0,.5*q]},{command:"L",values:[.5*T,0]},{command:"L",values:[T,.5*q]},{command:"L",values:[.5*T,q]},{command:"Z",values:[]}]},P||(T+=j,q+=j);break;case"square":S.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[T,0]},{command:"L",values:[T,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]},P||(T+=j,q+=j),F&&(E=!0);break;case"triangle":S.shape={type:"path",path:[{command:"M",values:[.5*T,0]},{command:"L",values:[T,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]},P||(T+=j,q+=j),F&&(E=!0);break;case"x":S.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[T,q]},{command:"M",values:[T,0]},{command:"L",values:[0,q]}]},F&&(E=!0);break;case"path":S.shape={type:"path",path:e.path||""},P||(T+=j,q+=j),F&&(E=!0),P=!0}break}case p:{const e=Math.min(null!=k?k:j,x||w),a=e>v?2*e:b;Z.width=e,T=a,q=e,S.shape={type:"path",path:[{command:"M",values:[0,q]},{command:"L",values:[T,q]}]};break}case u:case m:T=Math.min(null!=k?k:v,x||y)+j,q=T,P=!0,S.shape="object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.isSquareFill?i.JZ.squareFill[0]:i.JZ.fill[0];break;case r:{let a=(0,s.F2)(e.width),t=(0,s.F2)(e.height);const l=Math.max(a,t),n=a/t;a=n<=1?Math.ceil(l*n):l,t=n<=1?l:Math.ceil(l/n),T=Math.min(null!=k?k:a,x||y),q=Math.min(null!=k?k:t,x||y),S.shape={type:"image",x:-Math.round(T/2),y:-Math.round(q/2),width:T,height:q,src:e.url||""},F&&(E=!0);break}case d:{const a=e,t=a.text||f,l=a.font,n=Math.min(null!=k?k:(0,s.F2)(l.size),x||y),o=M(t,{weight:l.weight,size:n,family:l.family}),i=/[\uE600-\uE6FF]/.test(t);T=i?n:o,q=n;let c=.25*L((l?n:0).toString());i&&(c+=5),S.shape={type:"text",text:t,x:0,y:c,align:"middle",decoration:l&&l.decoration,rotated:a.rotated,kerning:a.kerning},S.font=l&&{size:n,style:l.style,decoration:l.decoration,weight:l.weight,family:l.family};break}}if(!S.shape)return Promise.reject(new l.Z("symbolPreview: renderPreviewHTML2D","symbol not supported."));const _=C,D=e.color;let H=null;return _&&"pattern"===_.type&&D&&e.type!==u?H=(0,o.Od)(_.src,D.toCss(!0)).then((e=>(_.src=e,S.fill=_,S))):(S.fill=C,H=Promise.resolve(S)),H.then((e=>{const t=[[e]];if("object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.applyColorModulation){const a=.6*T;t.unshift([{...e,offset:[-a,0],fill:(0,i.dc)(C,-.3)}]),t.push([{...e,offset:[a,0],fill:(0,i.dc)(C,.3)}]),T+=2*a}return(0,c.w)(t,[T,q],{node:a&&a.node,scale:P,opacity:z,rotation:F,useRotationSize:E})}))}}}]);
//# sourceMappingURL=8103.7337d821.chunk.js.map